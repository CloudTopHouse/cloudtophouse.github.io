(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{1234:function(s,n,t){"use strict";t.r(n);var a=t(43),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux上kdevtmpfsi挖矿木马清除处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux上kdevtmpfsi挖矿木马清除处理"}},[s._v("#")]),s._v(" Linux上kdevtmpfsi挖矿木马清除处理")]),s._v(" "),t("p",[s._v("之前购买了一台云服务器，平时也就作为一台Linux练手环境而已。最近发现我创建的服务总是挂，于是查了一下，发现服务器的CPU占用率总是接近99%，且这个占用最高的进程就是 "),t("code",[s._v("kdevtmpfsi")]),s._v(" 。于是网上查了一下，果然有问题，原来这是一个挖矿病毒。而且服务器中这个毒，都是因为服务器上安装的redis服务造成 的。")]),s._v(" "),t("p",[s._v("一般我们都是使用的redis的默认端口 "),t("code",[s._v("6379")]),s._v(" ，有时甚至密码都不设置，所以才留下了这个隐患。")]),s._v(" "),t("p",[s._v("这里建议大家，一定要设置好redis服务器的密码，尽量复杂些。另外就是redis的端口设置，最好不要用默认端口，改用其他主机端口。")]),s._v(" "),t("p",[s._v("下面，我就记录一下服务器上如何删除这个木马病毒。")]),s._v(" "),t("p",[t("strong",[s._v("先将相应木马文件删除")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -name kdevtmpfsi*\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("再将守护进程的文件删除")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -name kinsing*\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("杀死进程")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" kinsing\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 PID\n\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" kdevtmpfsi\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 PID\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("检查定时任务")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -l\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -e 删除定时任务\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("我的定时任务里倒是没发现有什么问题，不过可以检查一下。")]),s._v(" "),t("p",[s._v("还有 "),t("code",[s._v("/etc/rc.local")]),s._v(" 以及 "),t("code",[s._v("/etc/init.d")]),s._v(" 都检查一遍。另外就是查看下redis数据库中，是否也有异常的数据。我的就是，有好几条莫名奇妙的数据，好像是定时任务，所以也一定要删除掉。")])])}),[],!1,null,null,null);n.default=e.exports}}]);